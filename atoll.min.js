// atoll.js v0.6
//
// Copyright 2011 Marcos A. Ojeda, generic.cx
// Licensed under the MIT License
//
// "Statistics are like bikinis.  What they reveal is suggestive, 
//  but what they conceal is vital." -- Aaron Levenstein
//
// Date: Tue Jun  7 12:50:18 EDT 2011

var atoll=function(){var e=function(a,b){b||(b=function(a){return a});return a.map(b).reduce(function(a,b){return a+b})},j=function(a,b){b||(b=function(a){return a});return a.map(b).reduce(function(a,b){return a*b})},f=function(a){return e(a)/a.length},i=function(a){var b=a.length,a=a.sort(function(a,b){return a-b});return b%2==1?a[(b-1)/2]:(b=a.slice(b/2-1,b/2+1),f(b))},g=function(a,b){if(b===0)return 1;var b=b||1,c=a.length,d=f(a);return e(a,function(a){return Math.pow(a-d,b)})/c},l=function(a){var b=
f(a),c=a.length;return e(a,function(a){return Math.pow(a-b,2)})/c},m=function(a){var b=f(a),c=a.length;return e(a,function(a){return Math.pow(a-b,2)})/(c-1)},k=function(a){for(var b=0,c=0,d=1;d<=a.length;d+=1){var e=a[d-1],f=e-b;b+=f/d;c+=f*(e-b)}return c/(d-1)},n=function(a){var b=a.length;return k(a)*b/(b-1)},o=function(a){var b=g(a,2);return g(a,3)/Math.pow(b,1.5)},p=function(a){var b=g(a,4),a=g(a,2);return b/(a*a)},r={min:function(a){return Math.min.apply(null,a)},max:function(a){return Math.max.apply(null,
a)},size:function(a){return a.length},Sigma:e,Pi:j,mean:f,meanGeo:function(a){return Math.pow(j(a),1/a.length)},meanHar:function(a){var b=a.length,c=j(a);return b*c/e(a,function(a){return c/a})},median:i,centralMoment:g,quartiles:function(a){var b=a.sort(function(a,b){return a-b}),c=a.length,d;c%2==0?(a=c/2,d=c/2):(a=(c-1)/2,d=a+1);a=i(b.slice(0,a));c=i(b);b=i(b.slice(d));d=b-a;return{q1:a,q2:c,q3:b,iqr:d,lowerFence:a-1.5*d,upperFence:b+1.5*d}},variance:m,variancePop:l,stableVariance:n,stableVariancePop:k,
stdDev:function(a){return Math.sqrt(m(a))},stdDevPop:function(a){return Math.sqrt(l(a))},stableStdDev:function(a){return Math.sqrt(n(a))},stableStdDevPop:function(a){return Math.sqrt(k(a))},skewness:function(a){var b=a.length,b=Math.sqrt(b*(b-1))/(b-2),a=o(a);return b*a},skewnessPop:o,kurtosis:function(a){var b=a.length,a=p(a)-3;return(b-1)/((b-2)*(b-3))*((b+1)*a+6)},kurtosisPop:p},h=function(a){return new q(a)},q=function(a){this._data=a},s=function(a,b){q.prototype[a]=function(){var a=Array.prototype.slice.call(arguments);
Array.prototype.unshift.call(a,this._data);return b.apply(h,a)}};h.mixin=function(a){for(var b in a)a.hasOwnProperty(b)&&a[b]&&a[b].constructor&&a[b].call&&a[b].apply&&s(b,h[b]=a[b])};h.mixin(r);return h}();
